# Kurssin penetration-testing-course-2022-spring h2 tehtävät

## Z) OWASP 10 A03 - Injection

-Injection is the 3rd most potent threat in wep application security in 2021.

-In 2017 list, it was the most potent threat.

-Some common injections are SQL, NoSQL, OS command, ORM, LDAP, and EL or OGNL.

-Weak handling of input validation can be mitigated by performing application security testing prior to deployment

-Example of a SQL injection is that an attacker sends malicious SQL query in the form of an extra condition, such as OR 1=1.

-This query will always return true and the attacker has access to the database.

Lähde: https://owasp.org/Top10/A03_2021-Injection/

## A) SELECT * FROM student. Ratkaise SQLZoo:sta: 0 SELECT basics, 2 SELECT from World kohdat 1-4.

## B) Ratkaise WebGoatista: A1 Injection (intro).

## C) Nyrkkeilysäkki. Asenna Metasploitable 2 samaan verkkoon Kalin kanssa. Katso, ettei haavoittuva Metasploitable 2 näy Internetiin.

Aloitin asennuksen Googlaamalla ohjeet metasploitin asennukseen. Menin vulnhubin sivuille, koska tämä sivu on mainittu myös Teron materiaaleissa. https://www.vulnhub.com/entry/metasploitable-2,29/ latasin tältä sivulta metasploitable-linux-2.0.0.

Loin Virtualboxiin uuden koneen, ja asetin lataamani metasploitable2 tiedoston virtuaalikoneen levyksi. Asetin myös Kalin ja metasploitablen käyttämään host only network tyyppistä adapteria. Varmistin molemmilla koneillä, että niiden IP:t ovat samassa verkossa. Molemmat ovat. Tarkistin myös, pystyvätkö ne yhdistämään ulkopuoliseen internetiin komennolla ping 8.8.8.8. Kali ja metasploitable ilmoittivat, että eivät pysty.

## D) Nauhalle. Nauhoita kaikki konsolissa annetut asiat ja näkyvät tulosteet koko tehtävästä. (esim script)

Käytin terminaalin inputin tallentamiseen scriptiä. Vilkaisin vinkeistä ja katsoin myös Googlen kautta ohjeita. https://www.cloudsavvyit.com/14200/how-to-record-linux-terminal-commands-with-script/ ohjeesta löytyi monia hyödyllisiä lisävalintoja.

## E) Ei kuulu! Ennenkuin aloitat skannaukset, kokeile, ettei Kali pääse nettiin 'ping 8.8.8.8' vastaa "Network is unreachable"

Kokeilin tämän kohdassa C, kun olin vaihtanut network adapterin host only adapteriksi.
![image](https://user-images.githubusercontent.com/81921071/162590094-9b0cf8af-7f7d-45f0-8c83-0adc542e0a1e.png)

## f) Piilosilla. Etsi Metasploitable 2 verkkoskannauksella. Tarkista ensin, että osoitteet ovat uskottavia (ipcalc 10.0.0.1/23). Sitten ping sweep (nmap -sn). Analysoi tulokset, eli selitä, mitä mikäkin asia tulosteessa tarkoittaa. Mitä päättelet eri koneista?

Kokeilin komentoa nmap -sn 192.168.56.101, mikä on metasploitableni osoite. Varmistin osoitteen metasploitable virtuaalikoneelta joten se on uskottava. -sn lippu poistaa porttiskannauksen komennosta. Lähde: nmap -h.snasc

1 Rivi, Starting Nmap 7.92... - aikaleima sille, mihin aikaan skannaus on aloitettu.

2 Rivi, Nmap scan report for... - Nmapin raportti skannauksesta alkaa

3 Rivi, Host is up (0.0064s latency) - Nmap ilmoittaa, että antamassani ip-osoitteessa on linjoilla oleva pääte.

4 Rivi, Nmap done: 1 IP address (1 host up) scanned in 13.03 seconds - Nmapin raportti päättyy, skannattujen osoitteiden määrän ja löydettyjen päätteiden määrän.

## g) Kilo. Porttiskannaa 1000 tavallisinta porttia löydetyistä koneista. Selitä ja analysoi tulokset. Mikä koneista voisi olla Metasploitable 2?

Tajusin tässä vaiheessa, että minun ei pitänyt skannata edellisessä tehtävässä suoraan ip-osoitteella. No, korjataan virhe nyt. Vaihdoin edellisen tehtävän ip-osoitteen ip-osoiteavaruudeksi.

Käytin komentoa nmap --top-ports 1000 192.168.56.0/24. Komento skannaa 1000 yleisintä porttia. Lähde nmap -h.

osoite 192.168.56.101

Not shown: 977 closed ports.

osoite 192.168.56.102

All 1000 scanned ports are in ignored states. Tämä voisi mahdollisesti olla Kali kone ja tuo ylempi osoite voisi olla metasploitable.

## h) Ja tiskiallas. Porttiskannaa Metasploitable 2 perusteellisesti. Selitä ja analysoi tulokset. Selitä kustakin avoimesta portista, mikä palvelu siinä on / mihin se on tarkoitettu, onko se tavallisesti näkyvissä Internetiin ja onko se nykyiaikainen. Voit myös arvioida, onko versio päivitetty.

![image](https://user-images.githubusercontent.com/81921071/162592906-72527dc5-b8cb-4ec1-ac6e-ed82a01a5883.png)

Avoimet portit:

Portti 21 ftp - Portti 21 on oletusportti ftp kirjautumista varten. Porttia 20 käytetään varsinaiseen tiedonsiirtoon. 

Lähde: https://www.lifewire.com/tcp-port-21-818146

Portti 22 ssh - Portti 22 on SSH etäyhteyden oletusportti. Voisin ottaa ssh yhteyden esimerkiksi linuxissa komennolla ssh <ip-osoite> tai Windowsilla käyttämällä pUTTY ohjelmaa.
  
Portti 23 telnet - Telnet on vahentunut etäyhteysprotokolla.
  
Portti 25 smtp - Lyhenteestä voi päätellä, että tämä portti on simple mail transfer protokollaa varten. 
  
## i) Ovi jäi auki. Mitä löytyy portista 1524/tcp? Kokeile netcattilla 'nc'.

![image](https://user-images.githubusercontent.com/81921071/162593170-7ed29c4f-7138-46ad-a581-60bbdb9b9313.png)
  
Tällä komennolla pääsin roottina sisään ilman sen kummempia salasanoja. Pienenä trollauksena sammutin koneen "shutdown 1" komennolla.
  
![image](https://user-images.githubusercontent.com/81921071/162593221-5f1f2396-9d31-43f3-b2a5-a2d50efe38b7.png)






















