## H3 Attaaack!

Tehtävien lähde: https://terokarvinen.com/2021/penetration-testing-course-2022-spring kohta h3.

# x) Lue/katso/kuuntele ja tiivistä. Tässä alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen ja tiivistelmä riittää). Tiivistä ranskalaisilla viivoilla.

Chapter21, cross site scripting

- Koodi ajetaan uhrin nettiselaimessa kun uhri yhdistää haavoittuvaan nettisivuun
- Reflected XSS - jos nettisivulla on suojaamaton muuttuja, hyökkääjä voi syöttää haluamansa javascriptin tähän muuttujaan ja sen jälkeen lähettää linkin tähän sivuun. Linkin voi lähettää vaikka emailin tai pikaviestimen kautta.
- Stored XSS - videossa javascript tallennetaan hyökkääjän lähettämään viestiin nettisivulla. Kun uhri menee sivulle, koodi ajetaan. Tässä ei tarvitse klikata hyökkääjän linkkiä.
- Seuraavassa esimerkissä käytetään BeEF frameworkia. Hyökkääjä syöttää viestiinsä javascriptin, joka yhdistää kaikkien sivulle menijöiden selaimet BeEF konsoliin. Konsolin kautta hyökkääjä voi ajaa lisää haittakoodia.
- Käyttäjä voi suojatua kytkemällä javascriptin pois päältä selaimestaan.

![image](https://user-images.githubusercontent.com/81921071/164891882-94032b9a-0052-4100-959d-3c18bd9833c5.png)
Firefoxissa asetus löytyy avaamalla selaimessa about:config, hakemalla javascript.enabled ja vaihtamalla arvoksi false.

Lähde: https://learning.oreilly.com/videos/the-complete-ethical/9781839210495/9781839210495-video21_1/ Chapter21 kaikki videot.

OWASP 2017

A2 Broken authentication

- Broken authentication tarkoittaa käytännössä huonoja tietoturva- ja turvallisuuskäytäntöjä tunnistautumiseen/kirjautumiseen liittyen.
- Haavoittuvuuksia on esimerkiksi MFA:n puuttuminen, heikkojen salasanojen käyttö, sessoiden aikakatkaisun puuttuminen ja brute force hyökkäysten sallimisen.
- Voidaan estää asettamalla käyttäjille pakollisia tietoturvavaatimuksia.
- Esimerkiksi vahvan salasanan käyttö, pakollinen MFA ja käyttäjän lukitseminen vaikka 5 epäonnistuneen kirjautumisyrityksen jälkeen.

A3 Sensitive data exposure

- Sensitive data exposure tarkoittaa esimerkiksi henkilökohtaisten tietojen, luottokorttien tietojen ja muun arkaluontoisen datan hallinnassa olevia haavoittuvuuksia.
- Haavoittuvuuksia ovat esimerkiksi Datan siirto clear text formaatissa (kryptauksen puuttuminen), heikkojen salausmenetelmien käyttö ja oletusarvoisten salausavainten käyttö.
- Hyökkääjä voi käyttää näitä haavoittuvuuksia esimerkiksi man in the middle hyökkäyksessä kun dataa siirretään tai jos hyökkääjä pääsee murtautumaan palvelimelle joka sisältää kryptaamatonta dataa.

A7 Cross site scripting

- Cross site scriptingiä on kolmea eri tyyppiä. Reflected XSS, joka hyödyntää suojaamatonta käyttäjän syötettä. Hyökkääjä voi syöttää haittakoodinsa muuttujaan sivulla ja jakaa linkin uhrilleen. Kun uhri klikkaa linkkiä, haittakoodi ajetaan uhrin selaimessa.
- Stored XSS hyökkäyksessä hyökkääjä voi tallentaa sivulle haittakoodinsa ja kun uhri avaa sivun, haittakoodi ajetaan uhrin selaimessa.
- DOM XSS. DOM tarkoittaa document object modelia, joka on HTML sivun rakenne. DOM XSS hyökkäyksessä hyökkääjä syöttää haittakoodin esimerkiksi valikkoon, ja lähettää haitallista koodia sisältävän linkin uhrille.
- Tyypillisessä XSS hyökkäyksessä hyökkääjä pyrkii kaappaamaan käyttäjän session, varastamaan käyttäjän kirjautumistiedot tai lataamaan muita haittaohjelmia kaapatun selaimen kautta.
- Nettisivu voidaan suojata cross site scriptingiltä validoimalla käyttäjän syöte. Esimerkiksi käyttämällä HTML enkoodausta. Ohjelmointi 2 kurssilla muistaakseni harjoiteltiin tätä.


Lähteet: https://raw.githubusercontent.com/OWASP/Top10/master/2017/OWASP%20Top%2010-2017%20(en).pdf

https://owasp.org/www-community/attacks/DOM_Based_XSS
