## H5 Script Kiddie

Tehtävien lähde: https://terokarvinen.com/2021/penetration-testing-course-2022-spring/#comments kohta h5

# v) Lue ja tiivistä

O reilly

Ilmainen kokeilujaksoni oli loppunut, joten jouduin aloittamaan uuden.

- Termejä:
- Exploit - koodinpätkä joka sisältää haittakoodia ja käyttää haaovittuvuutta hyödykseen.
- Payload - Koodi, joka ajetaan kun kohteeseen on murtauduttu exploittia käyttämällä
- Meterpreter - Suosittu payload tyyppi. Sisältää paljon eri toiminnallisuuksia

- Metasploitin etuja
- Metasploit on avoimen lähdekoodin ohjelma
- Tukee suurien tietoverkkojen tunkeutumistestausta
- Payloadien helppo vaihtaminen lennosta
- Metasploit ei luultavasti kaada järjestelmää, johon se tunkeutuu.
- Sisäänrakennettu nmap tuki

# a) Asenna metasploitable 3

Aloitin Googlaamalla asennusohjeet metasploitable kolmea varten. Seurasin tätä ohjetta: https://michaelnieto.com/metasploitable-3/

Ensiksi asensin Vagrantin: https://www.vagrantup.com/downloads

Sitten tallensin metasploitable 3 vagrantfilen tietokoneelleni.

Sitten avasin Powershell terminaalin ja ajoin komennon vagrant up. Noin 15 minuutin jälkeen metasploitable kone oli asennettu virtualboxiini. Käynnistin sen vielä uudestaan ja viilasin asetukset kuntoon. Kokeilin, että näkyykö kone lähiverkkoni ulkopuolelle

![image](https://user-images.githubusercontent.com/81921071/167265095-e06ec463-ecda-4115-af41-aa3a4df32945.png)

Ei näy, joten voin siirtyä seuraavaan tehtävään.

# b) murtaudu metasploit 3 käyttämällä Metasploittia

Varmistin vielä, että kali ei pääsen nettiin.

![image](https://user-images.githubusercontent.com/81921071/167270499-473c9545-1ec8-4ba4-9274-d3dc2552e3c2.png)

Koska tiedän jo valmiiksi metasploitable 3:n ip-osoitteen niin passiivista tiedustelua ei tarvitse tehdä. Aloitan aktiivisen tiedustelun nmapilla.

Komento: nmap -sS -sV -O -p- -oA ms3 192.168.56.104

Eli tehdään stealth scan, versio skannaus kaikille porteille ja OS skannaus, sekä tallennetaan output tiedostonimellä ms3.

![image](https://user-images.githubusercontent.com/81921071/167270493-e34c9e8d-bd04-4ed3-9a31-519b184d0f4a.png)

Sitten aloin tutkimaan mahdollisia exploitteja. Ensiksi kokeilin muutamaa apache exploittia, mutta en saanut niitä toimimaan. Sitten aloin tutkimaan portissa 6697 ollutta UnrealIrcd palvelua. Googlasin mikä unrealircd on ja se on ilmeisesti IRC palvelin. 

Hain exploitteja komennolla search name:unreal

![image](https://user-images.githubusercontent.com/81921071/167271786-d3452c65-f2b5-4c73-89a2-b93d312d35d6.png)

Valitsin exploitin komennolla use 0 ja tarkistin asetukset komennolla show options

![image](https://user-images.githubusercontent.com/81921071/167271809-18618fd2-05b0-4ced-b0d6-902c3ed1d60f.png)

Valitsin RHOSTS:iksi metasploitable 3 koneen ip:n, ja RPORT:iksi 6697.

Kokeilin exploittia, mutta en ollut valinnut payloadia sille. Tarkistin, mitä payloadeja on saatavilla komennolla show payloads

![image](https://user-images.githubusercontent.com/81921071/167271852-83ad26d2-96aa-4960-9833-d24500145085.png)

Aloitin kokeilemaan payloadeja listasta. Kokeilin ensiksi bind_perls ja bind_ruby payloadeja. Kummallakaan ei ollut onnea.

![image](https://user-images.githubusercontent.com/81921071/167271871-6589de11-4f46-4ae5-86cf-27f9af004f22.png)

![image](https://user-images.githubusercontent.com/81921071/167271874-d447af94-40e6-4d3b-8aaa-9735a24cc96e.png)

Sitten kokeilin reverse payloadia. 

![image](https://user-images.githubusercontent.com/81921071/167271990-18bdd8d8-22f3-4f42-bd2d-d7f713edef5b.png)

Shell sessio aukesi ja metasploitableen murtauduttu.

![image](https://user-images.githubusercontent.com/81921071/167272068-c1106379-17b1-4d9d-8499-f4e4597eecd6.png)

Muodostettu yhteys näkyy myös metasploitablessa. Komento ss

![image](https://user-images.githubusercontent.com/81921071/167272353-0486e30e-b9fd-4165-aa4b-a26ee913a2a1.png)
